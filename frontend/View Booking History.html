<!DOCTYPE html>
<html>
<head>
    <title>Booking History</title>
    <style>
        table { border-collapse: collapse; width: 80%; margin: 20px auto; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
        th { background-color: #f2f2f2; }
        h2 { text-align: center; }
    </style>
</head>
<body>
    <h2>Upcoming Bookings</h2>
    <table id="upcomingTable">
        <thead>
            <tr>
                <th>ID</th>
                <th>Date</th>
                <th>Status</th>
                <th>Details</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <h2>Past Bookings</h2>
    <table id="pastTable">
        <thead>
            <tr>
                <th>ID</th>
                <th>Date</th>
                <th>Status</th>
                <th>Details</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script>
        // Replace with the actual logged-in user ID
        const userId = 123;

        // Function to populate a table with booking data
        function populateTable(tableId, bookings) {
            const tbody = document.querySelector(`#${tableId} tbody`);
            tbody.innerHTML = ''; // Clear existing rows
            bookings.forEach(booking => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${booking.id}</td>
                    <td>${booking.date}</td>
                    <td>${booking.status}</td>
                    <td>${booking.details}</td>
                `;
                tbody.appendChild(row);
            });
        }

        // Fetch booking history from backend
        fetch(`/api/bookingHistory?userId=${userId}`)
            .then(response => response.json())
            .then(data => {
                populateTable('upcomingTable', data.upcomingBookings || []);
                populateTable('pastTable', data.pastBookings || []);
            })
            .catch(error => {
                console.error('Error fetching booking history:', error);
            });
    </script>
</body>
</html>
